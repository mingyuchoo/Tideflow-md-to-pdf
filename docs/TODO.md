# 🚀 주요 성능 개선 포인트

## [x] 1. PDF 렌더링 병목 현상

### 문제점:

usePdfRenderer.ts에서 모든 페이지를 순차적으로 렌더링하지만, 실제로는 병렬 처리가 가능
PDF 로드 시 base64 변환 오버헤드
불필요한 전체 페이지 재렌더링

### 개선 방안:

// 가시 영역 우선 렌더링 (Viewport-based lazy loading)
// 현재: 모든 페이지를 한번에 렌더링
// 개선: 보이는 페이지만 먼저 렌더링, 나머지는 스크롤 시 로드

## [x] 2. 과도한 리렌더링

### 문제점:

PDFPreview.tsx에서 19개의 ref 사용으로 복잡도 증가
썸네일 생성이 매 렌더링마다 실행될 가능성
useEffect 의존성 배열이 과도하게 설정됨

### 개선 방안:

// React.memo로 컴포넌트 메모이제이션
// useMemo로 계산 비용이 높은 값 캐싱
// useCallback로 함수 재생성 방지

## [-] 3. CodeMirror 업데이트 최적화

### 문제점:

useCodeMirrorSetup.ts에서 모든 문서 변경 시 전체 내용을 문자열로 변환
requestMeasure 사용은 좋지만, 불필요한 상태 업데이트 발생

### 개선 방안:

// 변경된 부분만 추적하여 업데이트
// 디바운싱 시간 동적 조정 (짧은 문서는 짧게, 긴 문서는 길게)

## [-] 4. 렌더 큐 관리

### 문제점:

api.ts의 renderQueue가 모든 구독자에게 동일한 결과 전달
불필요한 중복 렌더링 요청

### 개선 방안:

// 렌더링 요청 중복 제거 강화
// 캐시 히트율 향상을 위한 content hash 기반 캐싱

## [-] 5. Anchor Offset 계산

### 문제점:

offsets.ts에서 PDF 텍스트 추출이 모든 페이지를 순회
동기적 계산으로 UI 블로킹 가능성

### 개선 방안:

// Web Worker로 오프셋 계산 이동
// 증분 계산 (필요한 앵커만 계산)

## [-] 6. 메모리 관리
### 문제점:

PDF blob URL이 생성되지만 정리 타이밍이 늦을 수 있음
썸네일 이미지가 메모리에 계속 유지
### 개선 방안:

// LRU 캐시로 썸네일 관리
// 사용하지 않는 PDF 리소스 즉시 해제
